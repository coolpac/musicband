# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∑–∞–≥—Ä—É–∑–∫–µ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –≤–∏–¥–µ–æ

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

–ß—Ç–æ–±—ã –∑–∞–≥—Ä—É–∑–∏—Ç—å –≤–∏–¥–µ–æ —Å –∫–æ–º–ø—å—é—Ç–µ—Ä–∞ –∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏—Ö –¥–ª—è –≤–µ–±-—Å—Ç—Ä–∏–º–∏–Ω–≥–∞:

```bash
# –û–¥–∏–Ω —Ñ–∞–π–ª
./scripts/optimize-videos.sh ~/Downloads/"7 –ª–µ–ø–µ—Å—Ç–æ–∫ —Å –≤–∞–º–∏.mp4"

# –ù–µ—Å–∫–æ–ª—å–∫–æ —Ñ–∞–π–ª–æ–≤
./scripts/optimize-videos.sh \
  ~/Downloads/"7 –ª–µ–ø–µ—Å—Ç–æ–∫ —Å –≤–∞–º–∏.mp4" \
  ~/Downloads/"–ù–µ —É–¥–µ—Ä–∂–∞–ª–∏—Å—å.mov" \
  ~/Downloads/"–Ø–Ω–≤–∞—Ä—Å–∫–∞—è –≤—ä—é–≥–∞.mov"

# –í—Å–µ –≤–∏–¥–µ–æ –∏–∑ –ø–∞–ø–∫–∏
./scripts/optimize-videos.sh ~/Downloads/*.mp4
./scripts/optimize-videos.sh ~/Downloads/*.mov
```

## –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç

–°–æ–≥–ª–∞—Å–Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º –∏–∑ `docs/VIDEO_HOSTING_AND_SERVER.md`, —Å–∫—Ä–∏–ø—Ç:

1. **–°–æ—Ö—Ä–∞–Ω—è–µ—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª** –≤ `backend/uploads/video/original/`
2. **–û–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç –≤–∏–¥–µ–æ** –¥–ª—è –≤–µ–±-—Å—Ç—Ä–∏–º–∏–Ω–≥–∞:
   - –ö–æ–¥–µ–∫ H.264 (–º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å)
   - –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ: 1080p (–¥–æ 2.5 –ú–±–∏—Ç/—Å) –∏–ª–∏ 720p (1.5 –ú–±–∏—Ç/—Å)
   - –ê—É–¥–∏–æ: AAC 128 kbps
   - –î–æ–±–∞–≤–ª—è–µ—Ç `faststart` –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –Ω–∞—á–∞–ª–∞ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
3. **–°–æ–∑–¥–∞–µ—Ç –ø—Ä–µ–≤—å—é** (–ø–µ—Ä–≤—ã–π –∫–∞–¥—Ä) –≤ `backend/uploads/video/thumb/`

## –í–∞—à–∏ –≤–∏–¥–µ–æ

–ò–∑ —Å–∫—Ä–∏–Ω—à–æ—Ç–∞ –≤–∏–¥–Ω–æ, —á—Ç–æ —É –≤–∞—Å –µ—Å—Ç—å:

| –ù–∞–∑–≤–∞–Ω–∏–µ | –†–∞–∑–º–µ—Ä | –§–æ—Ä–º–∞—Ç |
|----------|--------|--------|
| 7 –ª–µ–ø–µ—Å—Ç–æ–∫ —Å –≤–∞–º–∏.mp4 | 35.3 MB | MP4 |
| –ù–µ —É–¥–µ—Ä–∂–∞–ª–∏—Å—å.mov | 93.6 MB | MOV |
| –Ø–Ω–≤–∞—Ä—Å–∫–∞—è –≤—ä—é–≥–∞.mov | 19.3 MB | MOV |
| –ü–†–ò–ó–í–ê–ù–ò–ï –ê–†–¢–ò–°–¢ 2025 (–ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π).mp4 | 434 MB | MP4 |

**–ò—Ç–æ–≥–æ: ~582 –ú–ë**

–ü–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Ä–∞–∑–º–µ—Ä —É–º–µ–Ω—å—à–∏—Ç—Å—è –ø—Ä–∏–º–µ—Ä–Ω–æ –¥–æ **150-250 –ú–ë** (—ç–∫–æ–Ω–æ–º–∏—è 60-70%).

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ FFmpeg (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)

### macOS
```bash
brew install ffmpeg
```

### Ubuntu/Debian
```bash
sudo apt-get update
sudo apt-get install ffmpeg
```

### Windows
–°–∫–∞—á–∞–π—Ç–µ —Å [https://ffmpeg.org/download.html](https://ffmpeg.org/download.html)

## –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```bash
# –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞
cd /Users/who/–º—É–∑—ã–∫–∞–Ω—Ç—ã

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é (—É–∫–∞–∂–∏—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–π –ø—É—Ç—å –∫ –≤–∞—à–∏–º –≤–∏–¥–µ–æ)
./scripts/optimize-videos.sh \
  ~/Downloads/"7 –ª–µ–ø–µ—Å—Ç–æ–∫ —Å –≤–∞–º–∏.mp4" \
  ~/Downloads/"–ù–µ —É–¥–µ—Ä–∂–∞–ª–∏—Å—å.mov" \
  ~/Downloads/"–Ø–Ω–≤–∞—Ä—Å–∫–∞—è –≤—ä—é–≥–∞.mov" \
  ~/Downloads/"–ü–†–ò–ó–í–ê–ù–ò–ï –ê–†–¢–ò–°–¢ 2025 (–ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π).mp4"
```

–°–∫—Ä–∏–ø—Ç –ø–æ–∫–∞–∂–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ñ–∞–π–ª–∞:

```
=== –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –≤–∏–¥–µ–æ –¥–ª—è –≤–µ–±-—Å—Ç—Ä–∏–º–∏–Ω–≥–∞ ===

[1/4]
–û–±—Ä–∞–±–æ—Ç–∫–∞: 7 –ª–µ–ø–µ—Å—Ç–æ–∫ —Å –≤–∞–º–∏.mp4
  ‚Üí –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ—Ä–∏–≥–∏–Ω–∞–ª–∞...
  ‚Üí –ò—Å—Ö–æ–¥–Ω–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ: 1920x1080
  ‚Üí –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è 1080p, –±–∏—Ç—Ä–µ–π—Ç 2.5 –ú–±–∏—Ç/—Å
  ‚Üí –ö–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –≤–µ—Ä—Å–∏–∏...
  ‚Üí –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–µ–≤—å—é...
  ‚úì –ì–æ—Ç–æ–≤–æ!
    –û—Ä–∏–≥–∏–Ω–∞–ª:       35.3M
    –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω:  8.2M
    –£–º–µ–Ω—å—à–µ–Ω–∏–µ:     77%
    –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ –≤:    backend/uploads/video/optimized/7 –ª–µ–ø–µ—Å—Ç–æ–∫ —Å –≤–∞–º–∏_optimized.mp4
```

## –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–∫—Ä–∏–ø—Ç–∞ —É –≤–∞—Å –±—É–¥–µ—Ç:

```
backend/uploads/video/
‚îú‚îÄ‚îÄ original/              # –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã (–±—ç–∫–∞–ø)
‚îÇ   ‚îú‚îÄ‚îÄ 7 –ª–µ–ø–µ—Å—Ç–æ–∫ —Å –≤–∞–º–∏.mp4
‚îÇ   ‚îú‚îÄ‚îÄ –ù–µ —É–¥–µ—Ä–∂–∞–ª–∏—Å—å.mov
‚îÇ   ‚îú‚îÄ‚îÄ –Ø–Ω–≤–∞—Ä—Å–∫–∞—è –≤—ä—é–≥–∞.mov
‚îÇ   ‚îî‚îÄ‚îÄ –ü–†–ò–ó–í–ê–ù–ò–ï –ê–†–¢–ò–°–¢ 2025 (–ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π).mp4
‚îú‚îÄ‚îÄ optimized/             # –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–ª—è –≤–µ–±–∞ (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–∏!)
‚îÇ   ‚îú‚îÄ‚îÄ 7 –ª–µ–ø–µ—Å—Ç–æ–∫ —Å –≤–∞–º–∏_optimized.mp4
‚îÇ   ‚îú‚îÄ‚îÄ –ù–µ —É–¥–µ—Ä–∂–∞–ª–∏—Å—å_optimized.mp4
‚îÇ   ‚îú‚îÄ‚îÄ –Ø–Ω–≤–∞—Ä—Å–∫–∞—è –≤—ä—é–≥–∞_optimized.mp4
‚îÇ   ‚îî‚îÄ‚îÄ –ü–†–ò–ó–í–ê–ù–ò–ï –ê–†–¢–ò–°–¢ 2025 (–ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π)_optimized.mp4
‚îî‚îÄ‚îÄ thumb/                 # –ü—Ä–µ–≤—å—é (–ø–æ—Å—Ç–µ—Ä—ã)
    ‚îú‚îÄ‚îÄ 7 –ª–µ–ø–µ—Å—Ç–æ–∫ —Å –≤–∞–º–∏_thumb.jpg
    ‚îú‚îÄ‚îÄ –ù–µ —É–¥–µ—Ä–∂–∞–ª–∏—Å—å_thumb.jpg
    ‚îú‚îÄ‚îÄ –Ø–Ω–≤–∞—Ä—Å–∫–∞—è –≤—ä—é–≥–∞_thumb.jpg
    ‚îî‚îÄ‚îÄ –ü–†–ò–ó–í–ê–ù–ò–ï –ê–†–¢–ò–°–¢ 2025 (–ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π)_thumb.jpg
```

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–∞—á–µ—Å—Ç–≤–æ** –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –≤–∏–¥–µ–æ
2. **–£–¥–∞–ª–∏—Ç–µ –æ—Ä–∏–≥–∏–Ω–∞–ª—ã** –∏–∑ `backend/uploads/video/original/` –µ—Å–ª–∏ –∫–∞—á–µ—Å—Ç–≤–æ —É—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç (–æ—Å–≤–æ–±–æ–¥–∏—Ç–µ –º–µ—Å—Ç–æ)
3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ** —Ñ–∞–π–ª—ã –∏–∑ `optimized/` –¥–ª—è —Ä–∞–∑–¥–∞—á–∏ —á–µ—Ä–µ–∑ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
4. **–î–æ–±–∞–≤—å—Ç–µ –≤ .gitignore** –µ—Å–ª–∏ –Ω–µ —Ö–æ—Ç–∏—Ç–µ –∫–æ–º–º–∏—Ç–∏—Ç—å –≤–∏–¥–µ–æ:
   ```
   backend/uploads/video/original/
   backend/uploads/video/optimized/
   ```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ, –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `scripts/optimize-videos.sh`:

- `CRF=23` ‚Äî –∫–∞—á–µ—Å—Ç–≤–æ (–º–µ–Ω—å—à–µ = –ª—É—á—à–µ, –Ω–æ –±–æ–ª—å—à–µ —Ä–∞–∑–º–µ—Ä). –î–∏–∞–ø–∞–∑–æ–Ω 18-28
- `PRESET="medium"` ‚Äî —Å–∫–æ—Ä–æ—Å—Ç—å –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è:
  - `fast`, `faster`, `veryfast` ‚Äî –±—ã—Å—Ç—Ä–µ–µ, –Ω–æ –±–æ–ª—å—à–µ —Ä–∞–∑–º–µ—Ä
  - `slow`, `slower` ‚Äî –º–µ–¥–ª–µ–Ω–Ω–µ–µ, –Ω–æ –º–µ–Ω—å—à–µ —Ä–∞–∑–º–µ—Ä
- –ë–∏—Ç—Ä–µ–π—Ç—ã:
  - 1080p: `2500k` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
  - 720p: `1500k` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –∏–∑ –ø—Ä–æ–µ–∫—Ç–∞

–°–æ–≥–ª–∞—Å–Ω–æ `docs/VIDEO_HOSTING_AND_SERVER.md`:

- ‚úÖ –ù–µ —Ä–∞–∑–¥–∞–≤–∞—Ç—å —Å—ã—Ä–æ–µ –≤–∏–¥–µ–æ (3.5 –ì–ë+) —Å —Å–µ—Ä–≤–µ—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- ‚úÖ –°–∂–∞—Ç—å –¥–æ 1080p/720p —Å —Ä–∞–∑—É–º–Ω—ã–º –±–∏—Ç—Ä–µ–π—Ç–æ–º
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å H.264 –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
- ‚úÖ –î–æ–±–∞–≤–∏—Ç—å `faststart` –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –Ω–∞—á–∞–ª–∞ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
- üì¶ –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: –∑–∞–≥—Ä—É–∑–∏—Ç—å –Ω–∞ YouTube/Vimeo/Bunny Stream
- üåê –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: –≤—ã–Ω–µ—Å—Ç–∏ –≤ –æ–±—ä–µ–∫—Ç–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ + CDN

–î–ª—è ~50 –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å–µ—Ä–≤–µ—Ä 4 GB RAM —Å–ø—Ä–∞–≤–∏—Ç—Å—è —Å —Ä–∞–∑–¥–∞—á–µ–π –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –≤–∏–¥–µ–æ, –Ω–æ –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è –ª—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å CDN.

## –ü—Ä–æ–±–ª–µ–º—ã?

### FFmpeg –Ω–µ –Ω–∞–π–¥–µ–Ω
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫—É
ffmpeg -version

# –ï—Å–ª–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ (—Å–º. —Ä–∞–∑–¥–µ–ª "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ FFmpeg" –≤—ã—à–µ)
```

### –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–µ—Å—Ç–∞ –Ω–∞ –¥–∏—Å–∫–µ
–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å–æ–∑–¥–∞–µ—Ç –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã. –ù—É–∂–Ω–æ ~1.5x –æ—Ç —Ä–∞–∑–º–µ—Ä–∞ –∏—Å—Ö–æ–¥–Ω—ã—Ö –≤–∏–¥–µ–æ —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞.

### –î–æ–ª–≥–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
–ë–æ–ª—å—à–∏–µ —Ñ–∞–π–ª—ã (400+ MB) –º–æ–≥—É—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å—Å—è 5-10 –º–∏–Ω—É—Ç. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `PRESET="faster"` –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è.
